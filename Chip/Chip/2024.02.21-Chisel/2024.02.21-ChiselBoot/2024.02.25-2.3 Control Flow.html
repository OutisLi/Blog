<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2024.02.25-2.3 Control Flow | Personal Blog --from Outis Li</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.9501ef99.css" as="style"><link rel="preload" href="/Blog/assets/js/app.fffc62c2.js" as="script"><link rel="preload" href="/Blog/assets/js/2.d9b38520.js" as="script"><link rel="preload" href="/Blog/assets/js/1.a4e52cf6.js" as="script"><link rel="preload" href="/Blog/assets/js/41.9bf43c30.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.c8b6361b.js"><link rel="prefetch" href="/Blog/assets/js/100.31d8a184.js"><link rel="prefetch" href="/Blog/assets/js/101.43f73921.js"><link rel="prefetch" href="/Blog/assets/js/102.5ed282f0.js"><link rel="prefetch" href="/Blog/assets/js/103.38126020.js"><link rel="prefetch" href="/Blog/assets/js/104.18a97c2e.js"><link rel="prefetch" href="/Blog/assets/js/105.0e28206e.js"><link rel="prefetch" href="/Blog/assets/js/106.72dc4a51.js"><link rel="prefetch" href="/Blog/assets/js/107.4f8bc33d.js"><link rel="prefetch" href="/Blog/assets/js/108.9a2b3df8.js"><link rel="prefetch" href="/Blog/assets/js/109.acce4c89.js"><link rel="prefetch" href="/Blog/assets/js/11.1a662648.js"><link rel="prefetch" href="/Blog/assets/js/110.9c843418.js"><link rel="prefetch" href="/Blog/assets/js/111.5588d5e5.js"><link rel="prefetch" href="/Blog/assets/js/112.e2a0c013.js"><link rel="prefetch" href="/Blog/assets/js/113.1d702661.js"><link rel="prefetch" href="/Blog/assets/js/114.ea11a3c7.js"><link rel="prefetch" href="/Blog/assets/js/115.07cb358a.js"><link rel="prefetch" href="/Blog/assets/js/12.eccfbbbe.js"><link rel="prefetch" href="/Blog/assets/js/13.931bd67a.js"><link rel="prefetch" href="/Blog/assets/js/14.2bf74249.js"><link rel="prefetch" href="/Blog/assets/js/15.339e7fa7.js"><link rel="prefetch" href="/Blog/assets/js/16.198e4ae3.js"><link rel="prefetch" href="/Blog/assets/js/17.8071f72f.js"><link rel="prefetch" href="/Blog/assets/js/18.3d9ea382.js"><link rel="prefetch" href="/Blog/assets/js/19.831e14a0.js"><link rel="prefetch" href="/Blog/assets/js/20.9b49ec2d.js"><link rel="prefetch" href="/Blog/assets/js/21.1ec03a46.js"><link rel="prefetch" href="/Blog/assets/js/22.a17f69b5.js"><link rel="prefetch" href="/Blog/assets/js/23.883f4d72.js"><link rel="prefetch" href="/Blog/assets/js/24.288d26b1.js"><link rel="prefetch" href="/Blog/assets/js/25.8382691f.js"><link rel="prefetch" href="/Blog/assets/js/26.b16a0955.js"><link rel="prefetch" href="/Blog/assets/js/27.48df2183.js"><link rel="prefetch" href="/Blog/assets/js/28.78a93a22.js"><link rel="prefetch" href="/Blog/assets/js/29.35173b18.js"><link rel="prefetch" href="/Blog/assets/js/3.2e411533.js"><link rel="prefetch" href="/Blog/assets/js/30.399eb7e0.js"><link rel="prefetch" href="/Blog/assets/js/31.b3883f92.js"><link rel="prefetch" href="/Blog/assets/js/32.41cbba68.js"><link rel="prefetch" href="/Blog/assets/js/33.8c7dad02.js"><link rel="prefetch" href="/Blog/assets/js/34.14dbba3c.js"><link rel="prefetch" href="/Blog/assets/js/35.4f3f9027.js"><link rel="prefetch" href="/Blog/assets/js/36.fb0febbe.js"><link rel="prefetch" href="/Blog/assets/js/37.4389234d.js"><link rel="prefetch" href="/Blog/assets/js/38.8ed5cb63.js"><link rel="prefetch" href="/Blog/assets/js/39.737bc7aa.js"><link rel="prefetch" href="/Blog/assets/js/4.fb4fd8cb.js"><link rel="prefetch" href="/Blog/assets/js/40.a8f08a39.js"><link rel="prefetch" href="/Blog/assets/js/42.a0c00c32.js"><link rel="prefetch" href="/Blog/assets/js/43.a0c5e0dc.js"><link rel="prefetch" href="/Blog/assets/js/44.5c5a7720.js"><link rel="prefetch" href="/Blog/assets/js/45.5cf2d723.js"><link rel="prefetch" href="/Blog/assets/js/46.9bf39433.js"><link rel="prefetch" href="/Blog/assets/js/47.3160d2d2.js"><link rel="prefetch" href="/Blog/assets/js/48.9fa80ad1.js"><link rel="prefetch" href="/Blog/assets/js/49.936e67cd.js"><link rel="prefetch" href="/Blog/assets/js/5.936fe44f.js"><link rel="prefetch" href="/Blog/assets/js/50.4697b95b.js"><link rel="prefetch" href="/Blog/assets/js/51.ac66a436.js"><link rel="prefetch" href="/Blog/assets/js/52.d4c332c8.js"><link rel="prefetch" href="/Blog/assets/js/53.c9523c0d.js"><link rel="prefetch" href="/Blog/assets/js/54.1eaf6097.js"><link rel="prefetch" href="/Blog/assets/js/55.0890672b.js"><link rel="prefetch" href="/Blog/assets/js/56.05a29d48.js"><link rel="prefetch" href="/Blog/assets/js/57.33d78bd1.js"><link rel="prefetch" href="/Blog/assets/js/58.b459354c.js"><link rel="prefetch" href="/Blog/assets/js/59.9c73fddf.js"><link rel="prefetch" href="/Blog/assets/js/6.78a547ee.js"><link rel="prefetch" href="/Blog/assets/js/60.7299e19c.js"><link rel="prefetch" href="/Blog/assets/js/61.14b5149d.js"><link rel="prefetch" href="/Blog/assets/js/62.9d7660e9.js"><link rel="prefetch" href="/Blog/assets/js/63.5d1e8d84.js"><link rel="prefetch" href="/Blog/assets/js/64.0a735136.js"><link rel="prefetch" href="/Blog/assets/js/65.d8b81a24.js"><link rel="prefetch" href="/Blog/assets/js/66.cae6262d.js"><link rel="prefetch" href="/Blog/assets/js/67.2e380607.js"><link rel="prefetch" href="/Blog/assets/js/68.60ad3ba4.js"><link rel="prefetch" href="/Blog/assets/js/69.02f55698.js"><link rel="prefetch" href="/Blog/assets/js/7.21716967.js"><link rel="prefetch" href="/Blog/assets/js/70.194f0590.js"><link rel="prefetch" href="/Blog/assets/js/71.ee7d9bfb.js"><link rel="prefetch" href="/Blog/assets/js/72.43af9dd4.js"><link rel="prefetch" href="/Blog/assets/js/73.973c695f.js"><link rel="prefetch" href="/Blog/assets/js/74.c2b70d6c.js"><link rel="prefetch" href="/Blog/assets/js/75.a359e09d.js"><link rel="prefetch" href="/Blog/assets/js/76.c39b2efa.js"><link rel="prefetch" href="/Blog/assets/js/77.a5f949cf.js"><link rel="prefetch" href="/Blog/assets/js/78.6bd57e21.js"><link rel="prefetch" href="/Blog/assets/js/79.7cd9d8f4.js"><link rel="prefetch" href="/Blog/assets/js/80.a67aaeeb.js"><link rel="prefetch" href="/Blog/assets/js/81.828cb38e.js"><link rel="prefetch" href="/Blog/assets/js/82.37554809.js"><link rel="prefetch" href="/Blog/assets/js/83.0064504d.js"><link rel="prefetch" href="/Blog/assets/js/84.dd48bb56.js"><link rel="prefetch" href="/Blog/assets/js/85.f2cafb4b.js"><link rel="prefetch" href="/Blog/assets/js/86.f670b220.js"><link rel="prefetch" href="/Blog/assets/js/87.46382599.js"><link rel="prefetch" href="/Blog/assets/js/88.c3f9ed96.js"><link rel="prefetch" href="/Blog/assets/js/89.f2e32b85.js"><link rel="prefetch" href="/Blog/assets/js/90.3b1cd03d.js"><link rel="prefetch" href="/Blog/assets/js/91.6a37ce11.js"><link rel="prefetch" href="/Blog/assets/js/92.6ba751dd.js"><link rel="prefetch" href="/Blog/assets/js/93.036c2667.js"><link rel="prefetch" href="/Blog/assets/js/94.5e1af68e.js"><link rel="prefetch" href="/Blog/assets/js/95.7faaf930.js"><link rel="prefetch" href="/Blog/assets/js/96.d8b18168.js"><link rel="prefetch" href="/Blog/assets/js/97.4e7ad107.js"><link rel="prefetch" href="/Blog/assets/js/98.b741819f.js"><link rel="prefetch" href="/Blog/assets/js/99.c01eca41.js"><link rel="prefetch" href="/Blog/assets/js/vendors~docsearch.3b28fe31.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.9501ef99.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><img src="/Blog/assets/img/good.png" alt="Personal Blog --from Outis Li" class="logo"> <span class="site-name can-hide">Personal Blog --from Outis Li</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Research" class="dropdown-title"><span class="title">Research</span> <span class="arrow down"></span></button> <button type="button" aria-label="Research" class="mobile-dropdown-title"><span class="title">Research</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/Research/Research/2023-Geant4.html" class="nav-link">
  Geant4
</a></li><li class="dropdown-item"><h4>
          CS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Research/Research/2023.12.12-Docker.html" class="nav-link">
  Docker
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/2. 2024.02.21-Chisel.html" class="nav-link">
  tbc
</a></li></ul></li><li class="dropdown-item"><h4>
          tbc
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/3. 2023.11.07-Verilog语法.html" class="nav-link">
  tbc
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/3. 2023.11.07-Verilog语法.html" class="nav-link">
  tbc
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="LeetCode" class="dropdown-title"><span class="title">LeetCode</span> <span class="arrow down"></span></button> <button type="button" aria-label="LeetCode" class="mobile-dropdown-title"><span class="title">LeetCode</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Basic
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/LeetCode/Leetcode/2024.02.22-BFS.html" class="nav-link">
  BFS
</a></li><li class="dropdown-subitem"><a href="/Blog/LeetCode/Leetcode/2024.03.05-二叉树.html" class="nav-link">
  二叉树
</a></li><li class="dropdown-subitem"><a href="/Blog/LeetCode/Leetcode/2024.03.11-二分搜索.html" class="nav-link">
  二分搜索
</a></li><li class="dropdown-subitem"><a href="/Blog/LeetCode/Leetcode/2024.03.18-滑动窗口.html" class="nav-link">
  滑动窗口
</a></li></ul></li><li class="dropdown-item"><h4>
          tbc
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/3. 2023.11.07-Verilog语法.html" class="nav-link">
  tbc
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/3. 2023.11.07-Verilog语法.html" class="nav-link">
  tbc
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Chip" class="dropdown-title"><span class="title">Chip</span> <span class="arrow down"></span></button> <button type="button" aria-label="Chip" class="mobile-dropdown-title"><span class="title">Chip</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          一生一芯
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/1. 一生一芯计划.html" class="nav-link">
  预学习
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/1. 一生一芯计划.html" class="nav-link">
  B阶段
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/1. 一生一芯计划.html" class="nav-link">
  A阶段
</a></li></ul></li><li class="dropdown-item"><h4>
          Chisel
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/2. 2024.02.21-Chisel.html" class="nav-link">
  Outline
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot.html" class="nav-link">
  Bootcamp
</a></li></ul></li><li class="dropdown-item"><h4>
          Verilog
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/3. 2023.11.07-Verilog语法.html" class="nav-link">
  Outline
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/3. 2023.11.07-Verilog语法.html" class="nav-link">
  Basic
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow down"></span></button> <button type="button" aria-label="Others" class="mobile-dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          tbc
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/1. 一生一芯计划.html" class="nav-link">
  tbc
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/1. 一生一芯计划.html" class="nav-link">
  tbc
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/1. 一生一芯计划.html" class="nav-link">
  tbc
</a></li></ul></li><li class="dropdown-item"><h4>
          tbc
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot.html" class="nav-link">
  tbc
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/2. 2024.02.21-Chisel.html" class="nav-link">
  tbc
</a></li></ul></li><li class="dropdown-item"><h4>
          tbc
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/3. 2023.11.07-Verilog语法.html" class="nav-link">
  tbc
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/3. 2023.11.07-Verilog语法.html" class="nav-link">
  tbc
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Blog/" class="nav-link">
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Research" class="dropdown-title"><span class="title">Research</span> <span class="arrow down"></span></button> <button type="button" aria-label="Research" class="mobile-dropdown-title"><span class="title">Research</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/Research/Research/2023-Geant4.html" class="nav-link">
  Geant4
</a></li><li class="dropdown-item"><h4>
          CS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Research/Research/2023.12.12-Docker.html" class="nav-link">
  Docker
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/2. 2024.02.21-Chisel.html" class="nav-link">
  tbc
</a></li></ul></li><li class="dropdown-item"><h4>
          tbc
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/3. 2023.11.07-Verilog语法.html" class="nav-link">
  tbc
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/3. 2023.11.07-Verilog语法.html" class="nav-link">
  tbc
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="LeetCode" class="dropdown-title"><span class="title">LeetCode</span> <span class="arrow down"></span></button> <button type="button" aria-label="LeetCode" class="mobile-dropdown-title"><span class="title">LeetCode</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Basic
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/LeetCode/Leetcode/2024.02.22-BFS.html" class="nav-link">
  BFS
</a></li><li class="dropdown-subitem"><a href="/Blog/LeetCode/Leetcode/2024.03.05-二叉树.html" class="nav-link">
  二叉树
</a></li><li class="dropdown-subitem"><a href="/Blog/LeetCode/Leetcode/2024.03.11-二分搜索.html" class="nav-link">
  二分搜索
</a></li><li class="dropdown-subitem"><a href="/Blog/LeetCode/Leetcode/2024.03.18-滑动窗口.html" class="nav-link">
  滑动窗口
</a></li></ul></li><li class="dropdown-item"><h4>
          tbc
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/3. 2023.11.07-Verilog语法.html" class="nav-link">
  tbc
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/3. 2023.11.07-Verilog语法.html" class="nav-link">
  tbc
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Chip" class="dropdown-title"><span class="title">Chip</span> <span class="arrow down"></span></button> <button type="button" aria-label="Chip" class="mobile-dropdown-title"><span class="title">Chip</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          一生一芯
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/1. 一生一芯计划.html" class="nav-link">
  预学习
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/1. 一生一芯计划.html" class="nav-link">
  B阶段
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/1. 一生一芯计划.html" class="nav-link">
  A阶段
</a></li></ul></li><li class="dropdown-item"><h4>
          Chisel
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/2. 2024.02.21-Chisel.html" class="nav-link">
  Outline
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot.html" class="nav-link">
  Bootcamp
</a></li></ul></li><li class="dropdown-item"><h4>
          Verilog
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/3. 2023.11.07-Verilog语法.html" class="nav-link">
  Outline
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/3. 2023.11.07-Verilog语法.html" class="nav-link">
  Basic
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Others" class="dropdown-title"><span class="title">Others</span> <span class="arrow down"></span></button> <button type="button" aria-label="Others" class="mobile-dropdown-title"><span class="title">Others</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          tbc
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/1. 一生一芯计划.html" class="nav-link">
  tbc
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/1. 一生一芯计划.html" class="nav-link">
  tbc
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/1. 一生一芯计划.html" class="nav-link">
  tbc
</a></li></ul></li><li class="dropdown-item"><h4>
          tbc
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot.html" class="nav-link">
  tbc
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/2. 2024.02.21-Chisel.html" class="nav-link">
  tbc
</a></li></ul></li><li class="dropdown-item"><h4>
          tbc
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/3. 2023.11.07-Verilog语法.html" class="nav-link">
  tbc
</a></li><li class="dropdown-subitem"><a href="/Blog/Chip/Chip/3. 2023.11.07-Verilog语法.html" class="nav-link">
  tbc
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://google.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  External
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>2024 02 21 Chisel Boot</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.02.21-1 Introduction to Scala.html" class="sidebar-link">2024.02.21-1. Introduction to Scala</a></li><li><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.02.23-2.1 First Chisel Module.html" class="sidebar-link">2024.02.23-2.1 First Chisel Module</a></li><li><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.02.24-2.2 Combinational Logic.html" class="sidebar-link">2024.02.24-2.2 Combinational Logic</a></li><li><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.02.25-2.3 Control Flow.html" class="active sidebar-link">2024.02.25-2.3 Control Flow</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.02.25-2.3 Control Flow.html#last-connect-semantics" class="sidebar-link">Last Connect Semantics</a></li><li class="sidebar-sub-header"><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.02.25-2.3 Control Flow.html#when-elsewhen-and-otherwise" class="sidebar-link">when, elsewhen, and otherwise</a></li><li class="sidebar-sub-header"><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.02.25-2.3 Control Flow.html#the-wire-construct" class="sidebar-link">The Wire Construct</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.02.25-2.3 Control Flow.html#exercise-polynomial" class="sidebar-link">Exercise: Polynomial</a></li><li class="sidebar-sub-header"><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.02.25-2.3 Control Flow.html#exercise-finite-state-machine" class="sidebar-link">Exercise: Finite State Machine</a></li></ul></li></ul></li><li><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.02.26-2.4 Sequential Logic.html" class="sidebar-link">2024.02.26-2.4 Sequential Logic</a></li><li><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.02.28-2.5 FIR Filter.html" class="sidebar-link">2024.02.28-2.5 FIR Filter</a></li><li><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.02.29-2.6 More on ChiselTest.html" class="sidebar-link">2024.02.29-2.6 More on ChiselTest</a></li><li><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.03.01-3.1 Generators Parameters.html" class="sidebar-link">2024.03.01-3.1 Generators: Parameters</a></li><li><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.03.03-3.2 Generators Collections.html" class="sidebar-link">2024.03.03-3.2 Generators: Collections</a></li><li><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.03.04-3.3 Interlude Chisel Standard Library.html" class="sidebar-link">2024.03.04-3.3 Interlude: Chisel Standard Library</a></li><li><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.03.05-3.4 Higher-Order Functions.html" class="sidebar-link">2024.03.05-3.4 Higher-Order Functions</a></li><li><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.03.07-3.5 Functional Programming.html" class="sidebar-link">2024.03.07-3.5 Functional Programming</a></li><li><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.03.09-3.6 Object Oriented Programming.html" class="sidebar-link">2024.03.09-3.6 Object Oriented Programming</a></li><li><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.03.12-3.7 Generators Types.html" class="sidebar-link">2024.03.12-3.7 Generators: Types</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2024-02-25-2-3-control-flow"><a href="#_2024-02-25-2-3-control-flow" class="header-anchor">#</a> 2024.02.25-2.3 Control Flow</h1> <h2 id="last-connect-semantics"><a href="#last-connect-semantics" class="header-anchor">#</a> Last Connect Semantics</h2> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> LastConnect <span class="token keyword">extends</span> Module <span class="token punctuation">{</span>
  <span class="token keyword">val</span> io <span class="token operator">=</span> IO<span class="token punctuation">(</span><span class="token keyword">new</span> Bundle <span class="token punctuation">{</span>
    <span class="token keyword">val</span> in <span class="token operator">=</span> Input<span class="token punctuation">(</span>UInt<span class="token punctuation">(</span><span class="token number">4.</span>W<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> out <span class="token operator">=</span> Output<span class="token punctuation">(</span>UInt<span class="token punctuation">(</span><span class="token number">4.</span>W<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  io<span class="token punctuation">.</span>out <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">1.</span>U
  io<span class="token punctuation">.</span>out <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">2.</span>U
  io<span class="token punctuation">.</span>out <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">3.</span>U
  io<span class="token punctuation">.</span>out <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">4.</span>U
<span class="token punctuation">}</span>

<span class="token comment">//  Test LastConnect</span>
test<span class="token punctuation">(</span><span class="token keyword">new</span> LastConnect<span class="token punctuation">)</span> <span class="token punctuation">{</span> c <span class="token keyword">=&gt;</span> c<span class="token punctuation">.</span>io<span class="token punctuation">.</span>out<span class="token punctuation">.</span>expect<span class="token punctuation">(</span><span class="token number">4.</span>U<span class="token punctuation">)</span> <span class="token punctuation">}</span>
</code></pre></div><p>当有多个值被赋值给一个量时，最后的那个生效</p> <h2 id="when-elsewhen-and-otherwise"><a href="#when-elsewhen-and-otherwise" class="header-anchor">#</a> <code>when</code>, <code>elsewhen</code>, and <code>otherwise</code></h2> <div class="language-scala extra-class"><pre class="language-scala"><code>when<span class="token punctuation">(</span>someBooleanCondition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// things to do when true</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span>elsewhen<span class="token punctuation">(</span>someOtherBooleanCondition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// things to do on this condition</span>
<span class="token punctuation">}</span><span class="token punctuation">.</span>otherwise <span class="token punctuation">{</span>
  <span class="token comment">// things to do if none of th boolean conditions are true</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>when</code>是一种特殊的构造，它用于硬件生成。它类似于软件编程中的<code>if</code>语句，但是在硬件描述中，<code>when</code>会生成实际的硬件逻辑，如多路复用器。而标准的<code>if</code>语句通常用于生成时（编译时）的控制流，并不直接生成硬件。<code>if</code>语句在 Scala（因此在 Chisel 的生成时）可以有返回值，可以用于赋值或者作为表达式的一部分。相比之下，<code>when</code>是一种专门为硬件设计提供的控制结构，用于生成条件硬件逻辑，如多路复用器或条件赋值，但它不返回值。因此，当你需要根据输入信号在运行时动态地选择硬件行为时，你会使用<code>when</code>。而当你在编译时根据某些条件生成不同的硬件模块时，你会使用<code>if</code>。</p> <p>在 Scala 中，<code>==</code>用于基本类型和对象的相等性比较，而在 Chisel 中（一个建立在 Scala 之上的硬件构建语言），<code>===</code>用于硬件信号之间的相等性比较。这是因为 Chisel 需要区分硬件操作和 Scala 的软件操作，<code>===</code>在 Chisel 中被定义为生成硬件电路中的等于比较逻辑。而在 Scala 的<code>if</code>语句中，<code>==</code>仍然用于比较两个值是否相等。这种区分确保了代码的清晰性，以及硬件设计中逻辑正确性的维护。因此，在<code>when</code>中使用<code>===</code>来生成判断相等的硬件电路</p> <h2 id="the-wire-construct"><a href="#the-wire-construct" class="header-anchor">#</a> The <code>Wire</code> Construct</h2> <p><code>Wire</code>是一种基本的硬件构造类型，用于创建一个可以在模块内部读取和写入的信号。它主要用于表示组合逻辑或暂存数据，允许在硬件描述中定义中间变量或内部连接。使用<code>Wire</code>时，需要指定信号的数据类型，如<code>UInt</code>或<code>SInt</code>等。<code>Wire</code>类型的变量在定义时不持有初始值，需要在逻辑中显式赋值。在使用过程中，可以根据需要多次对其赋值，但在每个时钟周期结束时，<code>Wire</code>仅保留最后一次赋值的结果。<code>val myWire = Wire(UInt(32.W))</code></p> <div class="language-scala extra-class"><pre class="language-scala"><code>List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span>permutations<span class="token punctuation">.</span>foreach <span class="token punctuation">{</span> <span class="token keyword">case</span> i0 <span class="token operator">::</span> i1 <span class="token operator">::</span> i2 <span class="token operator">::</span> i3 <span class="token operator">::</span> Nil <span class="token keyword">=&gt;</span>
    println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;Sorting </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i0</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i1</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i2</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i3</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">}</span>
List<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">.</span>permutations<span class="token punctuation">.</span>foreach <span class="token punctuation">{</span> <span class="token keyword">case</span> i0 <span class="token operator">::</span> i1 <span class="token operator">::</span> i2 <span class="token operator">::</span> _ <span class="token operator">::</span> Nil <span class="token keyword">=&gt;</span>
  println<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token id function">s</span><span class="token string">&quot;Sorting </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i0</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i1</span></span><span class="token string"> </span><span class="token interpolation"><span class="token punctuation">$</span><span class="token expression">i2</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre></div><p>使用 Scala 的集合和模式匹配功能来遍历<code>List(1, 2, 3, 4)</code>的所有排列组合。<code>List(1, 2, 3, 4).permutations</code>生成一个包含所有可能排列的列表的迭代器。<code>foreach</code>循环遍历这些排列。</p> <p>在<code>foreach</code>的代码块中，<code>case i0 :: i1 :: i2 :: i3 :: Nil =&gt;</code>是一个模式匹配表达式，用于解构每个排列列表。这个表达式匹配一个包含四个元素的列表，将这四个元素分别绑定到变量<code>i0</code>、<code>i1</code>、<code>i2</code>、<code>i3</code>。<code>Nil</code>在这里表示列表的末尾，确保列表只有这四个元素。这种方式允许直接访问每个排列中的元素，然后可以将它们打印出来或用于其他逻辑操作。</p> <h3 id="exercise-polynomial"><a href="#exercise-polynomial" class="header-anchor">#</a> Exercise: Polynomial</h3> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> Polynomial <span class="token keyword">extends</span> Module <span class="token punctuation">{</span>
  <span class="token keyword">val</span> io <span class="token operator">=</span> IO<span class="token punctuation">(</span><span class="token keyword">new</span> Bundle <span class="token punctuation">{</span>
    <span class="token keyword">val</span> select <span class="token operator">=</span> Input<span class="token punctuation">(</span>UInt<span class="token punctuation">(</span><span class="token number">2.</span>W<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> x <span class="token operator">=</span> Input<span class="token punctuation">(</span>SInt<span class="token punctuation">(</span><span class="token number">32.</span>W<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> fOfX <span class="token operator">=</span> Output<span class="token punctuation">(</span>SInt<span class="token punctuation">(</span><span class="token number">32.</span>W<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">val</span> result <span class="token operator">=</span> Wire<span class="token punctuation">(</span>SInt<span class="token punctuation">(</span><span class="token number">32.</span>W<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">val</span> square <span class="token operator">=</span> Wire<span class="token punctuation">(</span>SInt<span class="token punctuation">(</span><span class="token number">32.</span>W<span class="token punctuation">)</span><span class="token punctuation">)</span>

  square <span class="token operator">:</span><span class="token operator">=</span> io<span class="token punctuation">.</span>x <span class="token operator">*</span> io<span class="token punctuation">.</span>x
  when<span class="token punctuation">(</span>io<span class="token punctuation">.</span>select <span class="token operator">==</span><span class="token operator">=</span> <span class="token number">0.</span>U<span class="token punctuation">)</span><span class="token punctuation">{</span>
    result <span class="token operator">:</span><span class="token operator">=</span> square <span class="token operator">-</span> <span class="token number">2.</span>S <span class="token operator">*</span> io<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token number">1.</span>S
  <span class="token punctuation">}</span><span class="token punctuation">.</span>elsewhen<span class="token punctuation">(</span>io<span class="token punctuation">.</span>select <span class="token operator">==</span><span class="token operator">=</span> <span class="token number">1.</span>U<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    result <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">2.</span>S <span class="token operator">*</span> square <span class="token operator">+</span> <span class="token number">6.</span>S <span class="token operator">*</span> io<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token number">3.</span>S
  <span class="token punctuation">}</span><span class="token punctuation">.</span>otherwise <span class="token punctuation">{</span>
    result <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">4.</span>S <span class="token operator">*</span> square <span class="token operator">-</span> <span class="token number">10.</span>S <span class="token operator">*</span> io<span class="token punctuation">.</span>x <span class="token operator">-</span> <span class="token number">5.</span>S
  <span class="token punctuation">}</span>

  io<span class="token punctuation">.</span>fOfX <span class="token operator">:</span><span class="token operator">=</span> result
<span class="token punctuation">}</span>

<span class="token comment">// Test Polynomial</span>
test<span class="token punctuation">(</span><span class="token keyword">new</span> Polynomial<span class="token punctuation">)</span> <span class="token punctuation">{</span> c <span class="token keyword">=&gt;</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span>x <span class="token keyword">&lt;-</span> <span class="token number">0</span> to <span class="token number">20</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>select <span class="token keyword">&lt;-</span> <span class="token number">0</span> to <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      c<span class="token punctuation">.</span>io<span class="token punctuation">.</span>select<span class="token punctuation">.</span>poke<span class="token punctuation">(</span>select<span class="token punctuation">.</span>U<span class="token punctuation">)</span>
      c<span class="token punctuation">.</span>io<span class="token punctuation">.</span>x<span class="token punctuation">.</span>poke<span class="token punctuation">(</span>x<span class="token punctuation">.</span>S<span class="token punctuation">)</span>
      c<span class="token punctuation">.</span>io<span class="token punctuation">.</span>fOfX<span class="token punctuation">.</span>expect<span class="token punctuation">(</span>poly<span class="token punctuation">(</span>select<span class="token punctuation">,</span> x<span class="token punctuation">)</span><span class="token punctuation">.</span>S<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="exercise-finite-state-machine"><a href="#exercise-finite-state-machine" class="header-anchor">#</a> Exercise: Finite State Machine</h3> <p>Grad students pass through four states in their career: Idle, Coding, Writing, and Graduating. These states transition based off three inputs: Coffee, Ideas they come up with, and Pressure from their advisor to make progress. Once they Graduate, they return to the Idle state. The FSM diagram below shows these states and transitions. Any unlabelled transition (i.e. when there are no inputs) returns a grad student to the Idle state instead of staying in the current state. The input precedence is coffee &gt; idea &gt; pressure, so when in the Idle state and receiving both coffee and pressure, a graduate student will move to the Coding state.</p> <p><img src="/Blog/assets/img/FSM.a8105ac5.png" alt="Untitled"></p> <p>检查逻辑：</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token comment">// state map</span>
<span class="token keyword">def</span> states <span class="token operator">=</span> Map<span class="token punctuation">(</span><span class="token string">&quot;idle&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;coding&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;writing&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;grad&quot;</span> <span class="token operator">-&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span>

<span class="token comment">// life is full of question marks</span>
<span class="token keyword">def</span> gradLife <span class="token punctuation">(</span>state<span class="token operator">:</span> <span class="token builtin">Int</span><span class="token punctuation">,</span> coffee<span class="token operator">:</span> <span class="token builtin">Boolean</span><span class="token punctuation">,</span> idea<span class="token operator">:</span> <span class="token builtin">Boolean</span><span class="token punctuation">,</span> pressure<span class="token operator">:</span> <span class="token builtin">Boolean</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Int</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> nextState <span class="token operator">=</span> states<span class="token punctuation">(</span><span class="token string">&quot;idle&quot;</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>state <span class="token operator">==</span> states<span class="token punctuation">(</span><span class="token string">&quot;idle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>coffee<span class="token punctuation">)</span> nextState <span class="token operator">=</span> states<span class="token punctuation">(</span><span class="token string">&quot;coding&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>idea<span class="token punctuation">)</span> nextState <span class="token operator">=</span> states<span class="token punctuation">(</span><span class="token string">&quot;idle&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>pressure<span class="token punctuation">)</span> nextState <span class="token operator">=</span> states<span class="token punctuation">(</span><span class="token string">&quot;writing&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span> nextState <span class="token operator">=</span> states<span class="token punctuation">(</span><span class="token string">&quot;idle&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>state <span class="token operator">==</span> states<span class="token punctuation">(</span><span class="token string">&quot;coding&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>coffee<span class="token punctuation">)</span> nextState <span class="token operator">=</span> states<span class="token punctuation">(</span><span class="token string">&quot;coding&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>idea<span class="token punctuation">)</span> nextState <span class="token operator">=</span> states<span class="token punctuation">(</span><span class="token string">&quot;writing&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>pressure<span class="token punctuation">)</span> nextState <span class="token operator">=</span> states<span class="token punctuation">(</span><span class="token string">&quot;writing&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span> nextState <span class="token operator">=</span> states<span class="token punctuation">(</span><span class="token string">&quot;idle&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>state <span class="token operator">==</span> states<span class="token punctuation">(</span><span class="token string">&quot;writing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>coffee<span class="token punctuation">)</span> nextState <span class="token operator">=</span> states<span class="token punctuation">(</span><span class="token string">&quot;writing&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>idea<span class="token punctuation">)</span> nextState <span class="token operator">=</span> states<span class="token punctuation">(</span><span class="token string">&quot;writing&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span>pressure<span class="token punctuation">)</span> nextState <span class="token operator">=</span> states<span class="token punctuation">(</span><span class="token string">&quot;grad&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">else</span> nextState <span class="token operator">=</span> states<span class="token punctuation">(</span><span class="token string">&quot;idle&quot;</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  nextState
<span class="token punctuation">}</span>

<span class="token comment">// some sanity checks</span>
<span class="token punctuation">(</span><span class="token number">0</span> until states<span class="token punctuation">.</span>size<span class="token punctuation">)</span><span class="token punctuation">.</span>foreach<span class="token punctuation">{</span> state <span class="token keyword">=&gt;</span> assert<span class="token punctuation">(</span>gradLife<span class="token punctuation">(</span>state<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">==</span> states<span class="token punctuation">(</span><span class="token string">&quot;idle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
assert<span class="token punctuation">(</span>gradLife<span class="token punctuation">(</span>states<span class="token punctuation">(</span><span class="token string">&quot;writing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">==</span> states<span class="token punctuation">(</span><span class="token string">&quot;writing&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
assert<span class="token punctuation">(</span>gradLife<span class="token punctuation">(</span>states<span class="token punctuation">(</span><span class="token string">&quot;idle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">==</span> states<span class="token punctuation">(</span><span class="token string">&quot;coding&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
assert<span class="token punctuation">(</span>gradLife<span class="token punctuation">(</span>states<span class="token punctuation">(</span><span class="token string">&quot;idle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token operator">==</span> states<span class="token punctuation">(</span><span class="token string">&quot;idle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
assert<span class="token punctuation">(</span>gradLife<span class="token punctuation">(</span>states<span class="token punctuation">(</span><span class="token string">&quot;grad&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token operator">==</span> states<span class="token punctuation">(</span><span class="token string">&quot;idle&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>Chisel:</p> <div class="language-scala extra-class"><pre class="language-scala"><code><span class="token keyword">class</span> GradLife <span class="token keyword">extends</span> Module <span class="token punctuation">{</span>
  <span class="token keyword">val</span> io <span class="token operator">=</span> IO<span class="token punctuation">(</span><span class="token keyword">new</span> Bundle <span class="token punctuation">{</span>
    <span class="token keyword">val</span> state <span class="token operator">=</span> Input<span class="token punctuation">(</span>UInt<span class="token punctuation">(</span><span class="token number">2.</span>W<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> coffee <span class="token operator">=</span> Input<span class="token punctuation">(</span>Bool<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> idea <span class="token operator">=</span> Input<span class="token punctuation">(</span>Bool<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> pressure <span class="token operator">=</span> Input<span class="token punctuation">(</span>Bool<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">val</span> nextState <span class="token operator">=</span> Output<span class="token punctuation">(</span>UInt<span class="token punctuation">(</span><span class="token number">2.</span>W<span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token keyword">val</span> idle <span class="token operator">::</span> coding <span class="token operator">::</span> writing <span class="token operator">::</span> grad <span class="token operator">::</span> Nil <span class="token operator">=</span> Enum<span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span>

  when<span class="token punctuation">(</span>io<span class="token punctuation">.</span>state <span class="token operator">==</span><span class="token operator">=</span> idle<span class="token punctuation">)</span><span class="token punctuation">{</span>
    when<span class="token punctuation">(</span>io<span class="token punctuation">.</span>coffee<span class="token punctuation">)</span> <span class="token punctuation">{</span>io<span class="token punctuation">.</span>nextState <span class="token operator">:</span><span class="token operator">=</span> coding<span class="token punctuation">}</span>
    <span class="token punctuation">.</span>elsewhen<span class="token punctuation">(</span>io<span class="token punctuation">.</span>idea<span class="token punctuation">)</span> <span class="token punctuation">{</span>io<span class="token punctuation">.</span>nextState <span class="token operator">:</span><span class="token operator">=</span> idle<span class="token punctuation">}</span>
    <span class="token punctuation">.</span>elsewhen<span class="token punctuation">(</span>io<span class="token punctuation">.</span>pressure<span class="token punctuation">)</span> <span class="token punctuation">{</span>io<span class="token punctuation">.</span>nextState <span class="token operator">:</span><span class="token operator">=</span> writing<span class="token punctuation">}</span>
    <span class="token punctuation">.</span>otherwise <span class="token punctuation">{</span>io<span class="token punctuation">.</span>nextState <span class="token operator">:</span><span class="token operator">=</span> idle<span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token punctuation">.</span>elsewhen <span class="token punctuation">(</span>io<span class="token punctuation">.</span>state <span class="token operator">==</span><span class="token operator">=</span> coding<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    when      <span class="token punctuation">(</span>io<span class="token punctuation">.</span>coffee<span class="token punctuation">)</span> <span class="token punctuation">{</span> io<span class="token punctuation">.</span>nextState <span class="token operator">:</span><span class="token operator">=</span> coding <span class="token punctuation">}</span>
    <span class="token punctuation">.</span>elsewhen <span class="token punctuation">(</span>io<span class="token punctuation">.</span>idea <span class="token operator">||</span> io<span class="token punctuation">.</span>pressure<span class="token punctuation">)</span> <span class="token punctuation">{</span> io<span class="token punctuation">.</span>nextState <span class="token operator">:</span><span class="token operator">=</span> writing <span class="token punctuation">}</span>
    <span class="token punctuation">.</span>otherwise <span class="token punctuation">{</span>io<span class="token punctuation">.</span>nextState <span class="token operator">:</span><span class="token operator">=</span> idle<span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token punctuation">.</span>elsewhen <span class="token punctuation">(</span>io<span class="token punctuation">.</span>state <span class="token operator">==</span><span class="token operator">=</span> writing<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    when      <span class="token punctuation">(</span>io<span class="token punctuation">.</span>coffee <span class="token operator">||</span> io<span class="token punctuation">.</span>idea<span class="token punctuation">)</span> <span class="token punctuation">{</span> io<span class="token punctuation">.</span>nextState <span class="token operator">:</span><span class="token operator">=</span> writing <span class="token punctuation">}</span>
    <span class="token punctuation">.</span>elsewhen <span class="token punctuation">(</span>io<span class="token punctuation">.</span>pressure<span class="token punctuation">)</span> <span class="token punctuation">{</span> io<span class="token punctuation">.</span>nextState <span class="token operator">:</span><span class="token operator">=</span> grad <span class="token punctuation">}</span>
    <span class="token punctuation">.</span>otherwise <span class="token punctuation">{</span>io<span class="token punctuation">.</span>nextState <span class="token operator">:</span><span class="token operator">=</span> idle<span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">.</span>otherwise <span class="token punctuation">{</span>io<span class="token punctuation">.</span>nextState <span class="token operator">:</span><span class="token operator">=</span> idle<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Test</span>
test<span class="token punctuation">(</span><span class="token keyword">new</span> GradLife<span class="token punctuation">)</span> <span class="token punctuation">{</span> c <span class="token keyword">=&gt;</span>
  <span class="token comment">// verify that the hardware matches the golden model</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span>state <span class="token keyword">&lt;-</span> <span class="token number">0</span> to <span class="token number">3</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>coffee <span class="token keyword">&lt;-</span> List<span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">for</span> <span class="token punctuation">(</span>idea <span class="token keyword">&lt;-</span> List<span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span>pressure <span class="token keyword">&lt;-</span> List<span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          c<span class="token punctuation">.</span>io<span class="token punctuation">.</span>state<span class="token punctuation">.</span>poke<span class="token punctuation">(</span>state<span class="token punctuation">.</span>U<span class="token punctuation">)</span>
          c<span class="token punctuation">.</span>io<span class="token punctuation">.</span>coffee<span class="token punctuation">.</span>poke<span class="token punctuation">(</span>coffee<span class="token punctuation">.</span>B<span class="token punctuation">)</span>
          c<span class="token punctuation">.</span>io<span class="token punctuation">.</span>idea<span class="token punctuation">.</span>poke<span class="token punctuation">(</span>idea<span class="token punctuation">.</span>B<span class="token punctuation">)</span>
          c<span class="token punctuation">.</span>io<span class="token punctuation">.</span>pressure<span class="token punctuation">.</span>poke<span class="token punctuation">(</span>pressure<span class="token punctuation">.</span>B<span class="token punctuation">)</span>
          c<span class="token punctuation">.</span>io<span class="token punctuation">.</span>nextState<span class="token punctuation">.</span>expect<span class="token punctuation">(</span>gradLife<span class="token punctuation">(</span>state<span class="token punctuation">,</span> coffee<span class="token punctuation">,</span> idea<span class="token punctuation">,</span> pressure<span class="token punctuation">)</span><span class="token punctuation">.</span>U<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.02.24-2.2 Combinational Logic.html" class="prev">
        2024.02.24-2.2 Combinational Logic
      </a></span> <span class="next"><a href="/Blog/Chip/Chip/2024.02.21-Chisel/2024.02.21-ChiselBoot/2024.02.26-2.4 Sequential Logic.html">
        2024.02.26-2.4 Sequential Logic
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/Blog/assets/js/app.fffc62c2.js" defer></script><script src="/Blog/assets/js/2.d9b38520.js" defer></script><script src="/Blog/assets/js/1.a4e52cf6.js" defer></script><script src="/Blog/assets/js/41.9bf43c30.js" defer></script>
  </body>
</html>
